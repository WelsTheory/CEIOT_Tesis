<div class="bg-white rounded-lg shadow-md hover:shadow-xl transition-shadow overflow-hidden">
    <!-- Header del Card con tooltip en el indicador de estado -->
    <div class="p-4 {% if modulo.estado == 'online' %}bg-green-50{% elif modulo.estado == 'warning' %}bg-yellow-50{% else %}bg-red-50{% endif %}">
        <div class="flex items-center justify-between">
            <h3 class="font-bold text-gray-800">{{ modulo.nombre }}</h3>
            <div class="flex items-center space-x-1">
                <!-- Indicador de estado sin tooltip -->
                <span class="status-indicator {% if modulo.estado == 'online' %}online{% elif modulo.estado == 'warning' %}warning{% else %}offline{% endif %}"></span>
                
                <span class="text-xs font-semibold {% if modulo.estado == 'online' %}text-green-700{% elif modulo.estado == 'warning' %}text-yellow-700{% else %}text-red-700{% endif %}">
                    {{ modulo.estado|upper }}
                </span>
            </div>
        </div>
        <p class="text-sm text-gray-600 mt-1">
            <i class="fas fa-location-dot mr-1"></i>{{ modulo.ubicacion }}
            <span class="ml-2 text-xs bg-white px-2 py-1 rounded">v{{ modulo.version }}</span>
        </p>
    </div>
    
    <!-- Body del Card -->
    <div class="p-4 space-y-3">
        <div class="flex items-center justify-between">
            <span class="text-sm text-gray-600">
                <i class="fas fa-temperature-high text-red-500 mr-2"></i>Temperatura
            </span>
            <span class="font-semibold text-gray-800">{{ modulo.temperatura|floatformat:1 }}°C</span>
        </div>
        
        <div class="flex items-center justify-between">
            <span class="text-sm text-gray-600">
                <i class="fas fa-gauge text-blue-500 mr-2"></i>Presión
            </span>
            <span class="font-semibold text-gray-800">{{ modulo.presion|floatformat:1 }} hPa</span>
        </div>
        
        <!-- Valores UP y DOWN -->
        <div class="flex items-center justify-between pt-2 border-t border-gray-200">
            <div class="text-center flex-1">
                <p class="text-xs text-gray-500">UP</p>
                <p class="font-bold {% if modulo.estado_up == 'correcto' %}text-green-600{% else %}text-red-600{% endif %}">
                    {{ modulo.up }}
                </p>
                {% if modulo.estado_up == 'mismatch' %}
                    <i class="fas fa-exclamation-triangle text-red-500 text-xs"></i>
                {% endif %}
            </div>
            <div class="border-l border-gray-200 h-8"></div>
            <div class="text-center flex-1">
                <p class="text-xs text-gray-500">DOWN</p>
                <p class="font-bold {% if modulo.estado_dw == 'correcto' %}text-green-600{% else %}text-red-600{% endif %}">
                    {{ modulo.down }}
                </p>
                {% if modulo.estado_dw == 'mismatch' %}
                    <i class="fas fa-exclamation-triangle text-red-500 text-xs"></i>
                {% endif %}
            </div>
        </div>
    </div>
    
    <!-- Footer del Card -->
    <div class="px-4 py-3 bg-gray-50 border-t border-gray-200 flex justify-between">
        <a href="{% url 'modulo_detail' modulo.modulo_id %}" class="text-blue-600 hover:text-blue-800 text-sm font-medium">
            <i class="fas fa-eye mr-1"></i>Ver Detalle
        </a>
        <a href="{% url 'modulo_control' modulo.modulo_id %}" class="text-gray-600 hover:text-gray-800 text-sm font-medium">
            <i class="fas fa-sliders-h mr-1"></i>Control
        </a>
    </div>
</div>

<style>
/* Estilo para el indicador de estado */
.status-indicator {
    display: inline-block;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    margin-right: 4px;
}

.status-indicator.online {
    background-color: #10b981;
    box-shadow: 0 0 8px rgba(16, 185, 129, 0.6);
}

.status-indicator.warning {
    background-color: #f59e0b;
    box-shadow: 0 0 8px rgba(245, 158, 11, 0.6);
}

.status-indicator.offline {
    background-color: #ef4444;
    box-shadow: 0 0 8px rgba(239, 68, 68, 0.6);
}
</style>